(()=>{function E(e=!1,n=!1){let t=document.createElement("div"),o=document.createElement("div"),i=document.createElement("h2"),r=document.createElement("p");return t.classList.add("phoneticAndAudio"),o.classList.add("phonetic"),r.classList.add("transcript"),i.textContent=e||"This is a Dictionary.",r.textContent=n||"You can search for any word.",!e&&!n&&(t.style.caretColor="transparent"),o.append(i,r),t.append(o),t}var l=document.body,_=document.querySelector("nav"),p=document.querySelector(".fontSelPopUp"),C=document.querySelector(".chosenFont"),L=document.querySelector(".fontSelect"),S=document.querySelector(".switch input"),u=document.querySelector(".cancelSearchBtn"),k=document.querySelector(".searchBtn"),a=document.querySelector(".search input "),s=document.querySelector(".search"),m={},z="https://api.dictionaryapi.dev/api/v2/entries/en",G=new Headers({Accept:"application/json"}),P=/\`|\-|\_|\~|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\+|\=|\[|\{|\]|\}|\||\\|\'|\<|\,|\.|\>|\?|\/|\""|\;|\:|[0-9]/g;function $(e){return e.trim().toLowerCase().split(" ").filter(n=>n!=="").join(" ")}function A(){a.blur(),_.focus()}var h=async e=>new Promise(n=>setTimeout(n,e));function J(e){e.stopPropagation();let t=Array.from(p.firstElementChild.children).find(o=>o===e.target);t?(document.body.style=`font-family: ${t.dataset.font};`,C.textContent=t.textContent,a.style=`font-family: ${t.dataset.font};`,window.localStorage.setItem("font",t.dataset.font)):(p.classList.toggle("off"),window.removeEventListener("pointerdown",J),L.addEventListener("pointerdown",b))}function b(e){e.stopPropagation(),N(),L.removeEventListener("pointerdown",b),p.classList.toggle("off"),window.addEventListener("pointerdown",J)}function q(){document.body.classList.toggle("dark-theme");let e=document.querySelector(".moonIcon");document.body.classList.contains("dark-theme")?(S.checked=!0,window.localStorage.setItem("darkTheme",1),e.src="./assets/images/icon-moon-dark.svg"):(S.checked=!1,window.localStorage.setItem("darkTheme",0),e.src="./assets/images/icon-moon.svg")}function K(){parseInt(window.localStorage.getItem("darkTheme"))===1&&q();let e=window.localStorage.getItem("font");if(e){let t=Array.from(p.firstElementChild.children).find(o=>o.dataset.font===e);t&&(C.textContent=t.textContent,document.body.style=`font-family: ${e};`,a.style=`font-family: ${e};`)}}function d(){let e=document.querySelector(".loader");s.classList.toggle("off"),e.classList.toggle("off")}function N(){let{left:e,bottom:n}=C.getBoundingClientRect();p.style.left=`${e}px`,p.style.top=`${n+15}px`}function Q(e,n=void 0){let t=document.createElement("div"),o=document.createElement("p"),i=document.createElement("h2"),r=document.createElement("p");return t.classList.add("errorFetch","unselectable"),o.classList.add("smile"),r.classList.add("message"),o.innerHTML=n??"&#128533;",i.textContent=e.title,r.textContent=`${e.message} ${e.resolution}`,t.append(o,i,r),t}function v(){let e=document.querySelector(".main"),n=document.querySelector(".errorFetch"),t=document.querySelector(".phoneticAndAudio");e&&e.remove(),t&&t.remove(),n&&n.remove()}function Z(){j({title:"Upps...",message:"Failed to fetch.",resolution:"Please, reload this page or check with your internet provider!"},"&#128531;",!0)}function j(e,n=void 0,t=!1){let o=Q(e,n);if(v(),d(),!t){s.insertAdjacentElement("afterend",o);return}o.style="margin: calc(var(--height-of-navBar)*2) 6.1vw 0px 6.1vw;",s.insertAdjacentElement("afterend",o),s.remove()}function T(e){if(s.style="border: 2px solid #FF5252;",u.classList.add("red"),!s.nextElementSibling.classList.contains("errorInput")){let n=document.createElement("p");n.classList.add("errorInput"),s.insertAdjacentElement("afterend",n)}e===1&&(s.nextElementSibling.textContent="Uuuh, can\u2019t use characters..."),e===0&&(s.nextElementSibling.textContent="Whoops, can\u2019t be empty...")}async function ee(e){e.preventDefault(),e.stopPropagation(),a.removeEventListener("input",D),a.value="",O()}function O(){k.classList.add("off"),D(),a.addEventListener("input",D)}function te(){s.nextElementSibling.classList.contains("errorInput")&&s.nextElementSibling.remove(),s.style="border: 2px solid var(--form-BG-color);",k.classList.remove("off"),u.classList.add("off"),a.removeEventListener("input",D)}function D(){s.nextElementSibling.classList.contains("errorInput")&&s.nextElementSibling.remove(),s.style="border: 2px solid #A445ED;",u.removeEventListener("pointerdown",ee);let e=$(a.value);!e||e.length===0?(a.value="",u.classList.add("off")):(u.classList.remove("off","red"),u.addEventListener("pointerdown",ee,{once:!0}),e.match(P)&&T(1))}function ne(e){let n=$(e);return n.match(P)?(T(1),a.focus(),!1):!n||n.length===0?(T(0),a.focus(),!1):n}function Le(e,n){let t=[e];for(;t.length>0;){let o=t.shift();if(o.word===n)return o;o.children&&t.push(...o.children)}return null}function U(e,n){if(e.word===n)return[n];if(!e.children)return!1;let t;if(e.children.find(o=>t=U(o,n)),t)return[e.word].concat(t)}function x(e,n=!1){let t=new Date;t=t.getTime().toString().slice(4);let o=`${e} ${t}`;if(n)m.word=o,m.children=[];else if(!m.word)m.word=o,m.children=[];else{let i=localStorage.getItem("curWord"),r=Le(m,i),c={word:o,children:[]};r.children.push(c)}localStorage.setItem("curWord",o)}async function Se(){d(),await h(400),v();let e=E();d(),s.insertAdjacentElement("afterend",e)}async function M(){B();let e=localStorage.getItem("curWord"),n;if([m].find(o=>n=U(o,e)),!n||n.length<=1)return await Se();d(),v(),await h(400);let t=n[n.length-2];if(t.includes("error404"))return localStorage.setItem("curWord",t),d(),await M();localStorage.setItem("curWord",t),t=t.split(" ").shift(),a.value=t,d(),await g(!1,!0)}var xe=l.getBoundingClientRect().left,Ie=l.getBoundingClientRect().top,Y,oe=0,X,re=0,R,f,w={mouse:{down:"pointerdown",move:"pointermove",up:"pointerup"},touch:{down:"touchstart",move:"touchmove",up:"touchend"}};function F(){try{return document.createEvent("TouchEvent"),f="touch",!0}catch{return f="mouse",!1}}function ie(e){Y=(F()?e.touches[0].pageX:e.pageX)-xe,X=(F()?e.touches[0].pageY:e.pageY)-Ie}function se(e){R=!0,ie(e),oe=Y,re=X}async function ae(e){if(F()||e.preventDefault(),R){ie(e);let n=Y-oe,t=X-re;if(Math.abs(n)>Math.abs(t)&&n>120)return M()}}function y(){R=!1}F();async function W(){await h(400),l.addEventListener(w[f].down,se),l.addEventListener(w[f].move,ae),l.addEventListener(w[f].up,y),l.addEventListener("mouseleave",y),window.addEventListener("load",y)}function B(){l.removeEventListener(w[f].down,se),l.removeEventListener(w[f].move,ae),l.removeEventListener(w[f].up,y),l.removeEventListener("mouseleave",y),window.removeEventListener("load",y)}function ce(){throw Z(),Error("Something went wrong. ")}async function Ce(e,n){x("error404",n);let t=await e.json();throw j(t),await W(),Error("Definition not found!")}async function V(e,n=!1){let t=await fetch(`${z}/${e}`,{headers:G}).catch(()=>ce());return t.status===400?ce():t.status===404?Ce(t,n):(await t.json())[0]}function le(e){let n=document.createElement("div"),t=document.createElement("div"),o=document.createElement("hr"),i=document.createElement("p"),r=document.createElement("a"),c=document.createElement("i");return n.classList.add("bottom"),i.classList.add("unselectable"),c.classList.add("fa-solid","fa-arrow-up-right-from-square","fa-2xs"),i.textContent="Source",r.textContent=" ",r.append(c),t.append(i,r),n.append(o,t),r.childNodes[0].textContent=e[0]||"https://en.wiktionary.org/wiki/",r.href=e[0]||"https://en.wiktionary.org/wiki/",n}function de(e,n){let t=document.createElement("li");if(t.textContent=e.definition,e.example&&e.example!==""){let o=document.createElement("p");o.classList.add("shallowText"),o.textContent=`"${e.example}"`,t.append(o)}n.append(t)}function me(e){if(!e||e.length===0)return!1;let n=document.createElement("ul");return e.length>4?e.slice(0,4).forEach(o=>de(o,n)):e.forEach(t=>de(t,n)),n}async function Ae(e){a.value=e,await g()}function be(e,n){let t=document.createElement("a");t.dataset.syn=e,t.textContent=`${e}/ `,t.addEventListener("pointerdown",async()=>await Ae(e),{once:!0}),n.append(t)}function ue(e,n){if(!e||e.length===0)return!1;let t=e;if(t.length>4&&(t=t.slice(0,4)),t.length===0)return!1;let o=document.createElement("div"),i=document.createElement("p"),r=document.createElement("div");return o.classList.add("synonyms"),i.classList.add("shallowText","unselectable"),r.classList.add("synonymsResult"),i.textContent="Synonyms",t.forEach(c=>be(c,r)),o.append(i,r),o}function Te(e){let n=document.createElement("div"),t=document.createElement("div"),o=document.createElement("p"),i=document.createElement("hr"),r=document.createElement("p");return n.classList.add("meaning",`${e.join("_")}`),t.classList.add("divider"),o.classList.add("partOfSpeech","unselectable"),r.classList.add("shallowText","unselectable"),o.textContent=`${e.join(" ")}`,r.textContent="Meaning",t.append(o,i),n.append(t,r),n}function fe(e,n,t,o){let i=n.trim().toLowerCase().split(" ").filter(H=>H!==""),r=Te(i),c=me(e),I=ue(t,o);return c&&r.append(c),I&&r.append(I),r}async function De(e,n){n.src="./assets/images/icon-play-hover.svg",await h(200),new Audio(e).play(),n.src="./assets/images/icon-play.svg"}function pe(e,n=!1){return n?e.audio&&e.audio!==""?e:!1:e.text&&e.text!==""?e:!1}function Be(e,n,t){let o=t,i;if(!e&&n.length>0){let r=n.find(pe);r?i=r.text:i=t}else i=e||t;return{searchedWord:o,transcriptWord:i}}function Fe(e){let n=e.find(i=>pe(i,!0));if(!n)return!1;let t=n.audio,o=document.createElement("img");return o.classList.add("playTranscript"),o.src="./assets/images/icon-play.svg",o.alt="playTranscript",o.addEventListener("pointerdown",async()=>await De(t,o)),o}function he(e,n,t){let{searchedWord:o,transcriptWord:i}=Be(e,n,t),r=E(o,i),c=Fe(n);return c&&r.append(c),r}function ve({meanings:e,phonetic:n=null,phonetics:t=null,sourceUrls:o=null,word:i}){let r=document.createElement("div"),c=le(o),I=he(n,t,i);r.classList.add("main"),e.forEach(H=>{let{definitions:Ee,partOfSpeech:ge,synonyms:we}=H,ye=fe(Ee,ge,we,i);r.append(ye)}),r.prepend(I),r.append(c),d(),s.insertAdjacentElement("afterend",r)}async function g(e,n=!1){e&&e.preventDefault(),B();let t=ne(a.value);if(!t)return;a.value="",A(),d(),v();let o;e?o=await V(t,!0):o=await V(t),n||(e?x(t,!0):x(t)),ve(o),await W()}var We=E();s.insertAdjacentElement("afterend",We);window.addEventListener("load",async()=>{if("serviceWorker"in navigator)try{await navigator.serviceWorker.register("sw.js",{type:"module"})}catch{console.log("serviceWorker failed")}});window.addEventListener("load",K);window.addEventListener("resize",N);l.addEventListener("pointerdown",A);S.addEventListener("change",q);a.addEventListener("blur",te);a.addEventListener("focus",O);s.addEventListener("submit",g);L.addEventListener("pointerdown",b);})();
//# sourceMappingURL=app.js.map
