(()=>{function v(e=!1,n=!1){let t=document.createElement("div"),o=document.createElement("div"),i=document.createElement("h2"),r=document.createElement("p");return t.classList.add("phoneticAndAudio"),o.classList.add("phonetic"),r.classList.add("transcript"),i.textContent=e||"This is a Dictionary.",r.textContent=n||"You can search for any word.",o.append(i,r),t.append(o),t}var d=document.body,V=document.querySelector("nav"),y=document.querySelector(".fontSelPopUp"),H=document.querySelector(".chosenFont"),L=document.querySelector(".fontSelect"),S=document.querySelector(".switch input"),u=document.querySelector(".cancelSearchBtn"),k=document.querySelector(".searchBtn"),a=document.querySelector(".search input "),s=document.querySelector(".search"),m={},_="https://api.dictionaryapi.dev/api/v2/entries/en",G=new Headers({Accept:"application/json"}),P=/\`|\-|\_|\~|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\+|\=|\[|\{|\]|\}|\||\\|\'|\<|\,|\.|\>|\?|\/|\""|\;|\:|[0-9]/g;function q(e){return e.trim().toLowerCase().split(" ").filter(n=>n!=="").join(" ")}function C(){a.blur(),V.focus()}var p=async e=>new Promise(n=>setTimeout(n,e));function z(e){e.stopPropagation();let t=Array.from(y.firstElementChild.children).find(o=>o===e.target);t?(document.body.style=`font-family: ${t.dataset.font};`,H.textContent=t.textContent,a.style=`font-family: ${t.dataset.font};`,window.localStorage.setItem("font",t.dataset.font)):(y.classList.toggle("off"),window.removeEventListener("pointerdown",z),L.addEventListener("pointerdown",A))}function A(e){e.stopPropagation(),L.removeEventListener("pointerdown",A),y.classList.toggle("off"),window.addEventListener("pointerdown",z)}function $(){document.body.classList.toggle("dark-theme");let e=document.querySelector(".moonIcon");document.body.classList.contains("dark-theme")?(S.checked=!0,window.localStorage.setItem("darkTheme",1),e.src="./assets/images/icon-moon-dark.svg"):(S.checked=!1,window.localStorage.setItem("darkTheme",0),e.src="./assets/images/icon-moon.svg")}function J(){parseInt(window.localStorage.getItem("darkTheme"))===1&&$();let e=window.localStorage.getItem("font");if(e){let t=Array.from(y.firstElementChild.children).find(o=>o.dataset.font===e);t&&(H.textContent=t.textContent,document.body.style=`font-family: ${e};`,a.style=`font-family: ${e};`)}}function l(){let e=document.querySelector(".loader");s.classList.toggle("off"),e.classList.toggle("off")}function K(e,n=void 0){let t=document.createElement("div"),o=document.createElement("p"),i=document.createElement("h2"),r=document.createElement("p");return t.classList.add("errorFetch","unselectable"),o.classList.add("smile"),r.classList.add("message"),o.innerHTML=n??"&#128533;",i.textContent=e.title,r.textContent=`${e.message} ${e.resolution}`,t.append(o,i,r),t}function h(){let e=document.querySelector(".main"),n=document.querySelector(".errorFetch"),t=document.querySelector(".phoneticAndAudio");e&&e.remove(),t&&t.remove(),n&&n.remove()}function Q(){N({title:"Upps...",message:"Failed to fetch.",resolution:"Please, reload this page or check with your internet provider!"},"&#128531;",!0)}function N(e,n=void 0,t=!1){let o=K(e,n);if(h(),l(),!t){s.insertAdjacentElement("afterend",o);return}o.style="margin: calc(var(--height-of-navBar)*2) 6.1vw 0px 6.1vw;",s.insertAdjacentElement("afterend",o),s.remove()}function b(e){if(s.style="border: 2px solid #FF5252;",u.classList.add("red"),!s.nextElementSibling.classList.contains("errorInput")){let n=document.createElement("p");n.classList.add("errorInput"),s.insertAdjacentElement("afterend",n)}e===1&&(s.nextElementSibling.textContent="Uuuh, can\u2019t use characters..."),e===0&&(s.nextElementSibling.textContent="Whoops, can\u2019t be empty...")}async function Z(e){e.preventDefault(),e.stopPropagation(),a.removeEventListener("input",T),a.value="",j()}function j(){k.classList.add("off"),T(),a.addEventListener("input",T)}function ee(){s.nextElementSibling.classList.contains("errorInput")&&s.nextElementSibling.remove(),s.style="border: 2px solid var(--form-BG-color);",k.classList.remove("off"),u.classList.add("off"),a.removeEventListener("input",T)}function T(){s.nextElementSibling.classList.contains("errorInput")&&s.nextElementSibling.remove(),s.style="border: 2px solid #A445ED;",u.removeEventListener("pointerdown",Z);let e=q(a.value);!e||e.length===0?(a.value="",u.classList.add("off")):(u.classList.remove("off","red"),u.addEventListener("pointerdown",Z,{once:!0}),e.match(P)&&b(1))}function te(e){let n=q(e);return n.match(P)?(b(1),a.focus(),!1):!n||n.length===0?(b(0),a.focus(),!1):n}function ye(e,n){let t=[e];for(;t.length>0;){let o=t.shift();if(o.word===n)return o;o.children&&t.push(...o.children)}return null}function O(e,n){if(e.word===n)return[n];if(!e.children)return!1;let t;if(e.children.find(o=>t=O(o,n)),t)return[e.word].concat(t)}function x(e,n=!1){let t=new Date;t=t.getTime().toString().slice(4);let o=`${e} ${t}`;if(n)m.word=o,m.children=[];else if(!m.word)m.word=o,m.children=[];else{let i=localStorage.getItem("curWord"),r=ye(m,i),c={word:o,children:[]};r.children.push(c)}console.log(m),localStorage.setItem("curWord",o)}async function Le(){l(),await p(400),h();let e=v();l(),s.insertAdjacentElement("afterend",e)}async function U(){D();let e=localStorage.getItem("curWord"),n;if([m].find(o=>n=O(o,e)),!n||n.length<=1)return await Le();l(),h(),await p(400);let t=n[n.length-2];if(t.includes("error404"))return localStorage.setItem("curWord",t),l(),await U();localStorage.setItem("curWord",t),t=t.split(" ").shift(),a.value=t,l(),await E(!1,!0)}var Se=d.getBoundingClientRect().left,xe=d.getBoundingClientRect().top,M,ne=0,Y,oe=0,X,f,g={mouse:{down:"pointerdown",move:"pointermove",up:"pointerup"},touch:{down:"touchstart",move:"touchmove",up:"touchend"}};function F(){try{return document.createEvent("TouchEvent"),f="touch",!0}catch{return f="mouse",!1}}function re(e){M=(F()?e.touches[0].pageX:e.pageX)-Se,Y=(F()?e.touches[0].pageY:e.pageY)-xe}function ie(e){X=!0,re(e),ne=M,oe=Y}async function se(e){if(F()||e.preventDefault(),X){re(e);let n=M-ne,t=Y-oe;if(Math.abs(n)>Math.abs(t)&&n>120)return U()}}function w(){X=!1}F();async function B(){await p(400),d.addEventListener(g[f].down,ie),d.addEventListener(g[f].move,se),d.addEventListener(g[f].up,w),d.addEventListener("mouseleave",w),window.addEventListener("load",w)}function D(){d.removeEventListener(g[f].down,ie),d.removeEventListener(g[f].move,se),d.removeEventListener(g[f].up,w),d.removeEventListener("mouseleave",w),window.removeEventListener("load",w)}function ae(){throw Q(),Error("Something went wrong. ")}async function Ie(e,n){x("error404",n);let t=await e.json();throw N(t),await B(),Error("Definition not found!")}async function R(e,n=!1){let t=await fetch(`${_}/${e}`,{headers:G}).catch(()=>ae());if(t.status===400)return ae();if(t.status===404)return Ie(t,n);let o=await t.json();return console.log(o),o[0]}function ce(e){let n=document.createElement("div"),t=document.createElement("div"),o=document.createElement("hr"),i=document.createElement("p"),r=document.createElement("a"),c=document.createElement("i");return n.classList.add("bottom"),i.classList.add("unselectable"),c.classList.add("fa-solid","fa-arrow-up-right-from-square","fa-2xs"),i.textContent="Source",r.textContent=" ",r.append(c),t.append(i,r),n.append(o,t),r.childNodes[0].textContent=e[0]||"https://en.wiktionary.org/wiki/",r.href=e[0]||"https://en.wiktionary.org/wiki/",n}function le(e,n){let t=document.createElement("li");if(t.textContent=e.definition,e.example&&e.example!==""){let o=document.createElement("p");o.classList.add("shallowText"),o.textContent=`"${e.example}"`,t.append(o)}n.append(t)}function de(e){if(!e||e.length===0)return!1;let n=document.createElement("ul");return e.length>4?e.slice(0,4).forEach(o=>le(o,n)):e.forEach(t=>le(t,n)),n}async function Ce(e){a.value=e,await E()}function Ae(e,n){let t=document.createElement("a");t.dataset.syn=e,t.textContent=`${e}/ `,t.addEventListener("pointerdown",async()=>await Ce(e),{once:!0}),n.append(t)}function me(e,n){if(!e||e.length===0)return!1;let t=e;if(t.length>4&&(t=t.slice(0,4)),t.length===0)return!1;let o=document.createElement("div"),i=document.createElement("p"),r=document.createElement("div");return o.classList.add("synonyms"),i.classList.add("shallowText","unselectable"),r.classList.add("synonymsResult"),i.textContent="Synonyms",t.forEach(c=>Ae(c,r)),o.append(i,r),o}function be(e){let n=document.createElement("div"),t=document.createElement("div"),o=document.createElement("p"),i=document.createElement("hr"),r=document.createElement("p");return n.classList.add("meaning",`${e.join("_")}`),t.classList.add("divider"),o.classList.add("partOfSpeech","unselectable"),r.classList.add("shallowText","unselectable"),o.textContent=`${e.join(" ")}`,r.textContent="Meaning",t.append(o,i),n.append(t,r),n}function ue(e,n,t,o){let i=n.trim().toLowerCase().split(" ").filter(W=>W!==""),r=be(i),c=de(e),I=me(t,o);return c&&r.append(c),I&&r.append(I),r}async function Te(e,n){n.src="./assets/images/icon-play-hover.svg",await p(200),new Audio(e).play(),n.src="./assets/images/icon-play.svg"}function fe(e,n=!1){return n?e.audio&&e.audio!==""?e:!1:e.text&&e.text!==""?e:!1}function De(e,n,t){let o=t,i;if(!e&&n.length>0){let r=n.find(fe);r?i=r.text:i=t}else i=e||t;return{searchedWord:o,transcriptWord:i}}function Fe(e){let n=e.find(i=>fe(i,!0));if(!n)return!1;let t=n.audio,o=document.createElement("img");return o.classList.add("playTranscript"),o.src="./assets/images/icon-play.svg",o.alt="playTranscript",o.addEventListener("pointerdown",async()=>await Te(t,o)),o}function pe(e,n,t){let{searchedWord:o,transcriptWord:i}=De(e,n,t),r=v(o,i),c=Fe(n);return c&&r.append(c),r}function he({meanings:e,phonetic:n=null,phonetics:t=null,sourceUrls:o=null,word:i}){let r=document.createElement("div"),c=ce(o),I=pe(n,t,i);r.classList.add("main"),e.forEach(W=>{let{definitions:ve,partOfSpeech:Ee,synonyms:ge}=W,we=ue(ve,Ee,ge,i);r.append(we)}),r.prepend(I),r.append(c),l(),s.insertAdjacentElement("afterend",r)}async function E(e,n=!1){e&&e.preventDefault(),D();let t=te(a.value);if(!t)return;a.value="",C(),l(),h();let o;e?o=await R(t,!0):o=await R(t),n||(e?x(t,!0):x(t)),he(o),await B()}var Be=v();s.insertAdjacentElement("afterend",Be);window.addEventListener("load",async()=>{if("serviceWorker"in navigator)try{await navigator.serviceWorker.register("sw.js",{type:"module"})}catch{console.log("serviceWorker failed")}});window.onload=J();document.body.addEventListener("pointerdown",C);S.addEventListener("change",$);a.addEventListener("blur",ee);a.addEventListener("focus",j);s.addEventListener("submit",E);L.addEventListener("pointerdown",A);})();
//# sourceMappingURL=app.js.map
